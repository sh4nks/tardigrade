{% set page_title = user.username ~ ' - Profile' %}

{% extends theme('layout.html') %}
{% block content %}

<div class="media">
    <a class="pull-left" href="#">
        <img class="db img-circle" src="//placehold.it/130x130">
    </a>
    <div class="col-lg-5">
        <h4>
            {% if user.firstname %}
                <a href="{{ url_for('user.profile', username=user.username) }}">{{ user.firstname }}
                {% if user.lastname %}
                    {{ user.lastname }}
                {% endif %}
                </a>
            {% else %}
                <a href="{{ url_for('user.profile', username=user.username) }}">{{ user.username }}</a>
            {% endif %}

            {% if user.location %}
                <small> {{ user.location }}</small>
            {% endif %}
        </h4>

        <!-- TODO: Add a small info field -->
        {% if user.about_me %}
        <h5>{{ user.about_me }}</h5>
        {% else %}
        <h5>User has not revealed any details.</h5>
        {% endif %}

        {% if user.website %}
        <a href="{{ user.website }}" class="btn btn-default btn-xs" role="button">
            <span class="fa fa-globe"></span> WWW
        </a>
        {% endif %}

        {% if user.birthday %}
        <span class="btn btn-default btn-xs" role="button">
            <span class="fa fa-gift"></span> {{ user.birthday|time_format("%B %d %Y") }}
        </span>
        {% endif %}
    </div>
</div>

{% if user.posts %}
<hr>
    {% for post in user.posts %}
    <h1><a href="{{ url_for('blog.view_post', post_id=post.id, slug=post.slug) }}">{{ post.title }}</a></h1>
    <ul class="blog-info">
        <li><i class="fa fa-calendar"></i> {{ post.date_created|time_format }}</li>
        <li><i class="fa fa-user"></i> <a href="{{ url_for('user.profile', username=post.user.username) }}">{{ post.user.username }}</a></li>
        <li><i class="fa fa-comment"></i> <a href="{{ url_for('blog.view_post', post_id=post.id, slug=post.slug) }}">Comments ({{ post.comment_count }})</a></li>
    </ul>

    <div class="blog-content">
        {{ post.content }}<br />
    </div>
    {% endfor %}
{% endif %}

{% endblock %}
